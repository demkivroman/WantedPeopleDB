{% extends "base.html" %}
{% load static from staticfiles %}
{% block title %} Results {% endblock title%}
{% block style %}
<style>
    td{
    padding: 15px;
    vertical-align: top;
    text-align: left;
    }
    img{
    border-radius: 8px;
    filter: grayscale(100%);
    }
    .td_photo{
    width: 80px;
    }
    .comment{
    width: 100%;
    }
</style>
{% endblock style %}
{% block content %}
<div class = "row" id = "results">
        <div class = "col-sm-12">
           <nav class="navbar navbar-light bg-light">
             <form action="{% url 'search' %}" method="GET" class = "form-inline" id = "main_search2">
               <input class="form-control mr-sm-2" type="text" name="mainsearch" placeholder=
               "Enter information about wanted person">
             </form>
           </nav>
        </div>
        <div class = "col-sm-12">
            {% if search_result %}
                <table style="width: 50%">
                    {% for person in search_result %}
                       <tr>
                          <td class = " td_photo">
                          {% if person.photo %}
                          <a href = "{{person.photo.url}}">
                          <img height = "100" width = "100" class="w3-grayscale" 
                          src = "{{person.photo.url}}">
                          </a>
                          {% else %}
                          <img height = "100" width = "100" class="w3-grayscale" 
                          src = "{% static 'img/generic-man.png'%}">
                          {% endif%}
                          </td>
                          <td>
                          <strong>name: </strong>{{ person.first_name }} {{ person.last_name }} </br>
                          {% if person.birthday %}
                          <strong>birthday: </strong>{{person.birthday}} </br>
                          {% endif %}
                          {% if person.phone %}
                          <strong>phone: </strong>{{person.phone}} </br>
                          {% endif %}
                          {% if person.email %}
                          <strong>email: <a href = "#" style="text-decoration:underline;"
                                            data-email = {{person.email}} onclick = "sendMail(this)">
                          </strong>{{person.email}}</a> </br>
                          {% endif %}
                          {% if person.country %}
                          <strong>address: </strong>{{person.country}} {{person.city}}</br>
                          {% endif %}
                          </td>
                       </tr>
                       {% if person.note %}
                          <tr><td colspan = "2" style="padding-top:0px">
                          <strong>Note: </strong>{{person.note}}
                          </td>
                          </tr>
                       {% endif %}
                       <tr>
                         <td style="padding-top:0px;">
                         <a href="{% url 'comment' person.id %}"
                          class="badge badge-secondary">
                           Comments</a>
                         </td>
                         <td style="border-bottom: 1px solid #d0d0d0;">
                         </td>
                       </tr>
                    {% endfor %}
                </table>
                
            {% endif %}
        </div>
</div>

<!-- The Modal -->
  <div class="modal fade" id="sendMessageModal">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <span>Send message to person who submited an ad...</span>
          <button type="button" class="close" data-dismiss="modal">x</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
         <form action = "{% url 'send_mail' perId %}" method = 'post' enctype='multipart/ form-data' 
                  id = 'formSendMessage'> 
             {%csrf_token%}
                  <label>Email(optional):</label></br>
                  <input type = 'email' value = "" name = "mailFrom" size = "40"></br></br>
                  <textarea rows = '3' cols = '100' name = "sendMail"
                   style="min-width: 100%" required>
                  </textarea></br></br>
                  <input type = 'hidden' value = "" name ='email'>
                  <input type = 'hidden' value = {{request.path}} name ="currentURL">
                  <input type = 'submit' name='send' value='Send'> &nbsp;
                  <input type = 'reset' value = 'Clear'>
            </form>
        </div>
      </div>
    </div>
  </div>
  <!-- End Modal -->


{% endblock content %}

{% block footer %}
<div class = "row" style="margin-top: 20px">
       <div class = "col-sm-12">
          <span class = "glyphicon glyphicon-copyright-mark"> </span> 2018 wanted R.D
       </div>
</div>
{% endblock footer %}
